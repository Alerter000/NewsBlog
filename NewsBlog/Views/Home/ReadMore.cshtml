@model NewsBlog.Models.NewsAndComments

@{
    ViewBag.Title = Model.News.Title;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <title>@Model.News.Title</title>
    @*<script src="~/Scripts/AddComment.js" type="text/javascript"></script>*@
</head>
@if (Model.News != null)
{
    if (Model.News.Image != null)
    {
        @Html.Raw("<img src=\"data:image/jpeg;base64,"
                                + Convert.ToBase64String(Model.News.Image) + "\" />")
    }
    <div class="main-content">@Model.News.Content</div>
    <div class="feature" id="comments">
        @Html.Partial("_GridForComments", Model)
        
    </div>

}

@if (Session["LogedUserName"] != null)
{
    
    using (Ajax.BeginForm("AddComment", new AjaxOptions { UpdateTargetId = "comments" }))
    {
        <div>
            @Html.TextAreaFor(c => c.CurrentComment, String.Empty);
        </div>
        <input type="submit" value="Добавить комментарий" />
    }
}
else
{
    <div>
        @*@String.Format("Вы не можете оставлять комментарии, {0} или {1}", @Html.ActionLink("зарегистрируйтесь", "Register", "Home"),
        @Html.ActionLink("авторизуйтесь", "Login", "Home")).*@
        Вы не можете оставлять комментарии, @Html.ActionLink("зарегистрируйтесь", "Register", "Home") или @Html.ActionLink("авторизуйтесь", "Login", "Home")

    </div>
}
